(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b0197b56"],{"26d3":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[t.isLoading?i("div",{staticClass:"modal"},[t._m(0)]):i("div",{staticClass:"text-right"},[i("div",{},[t.isEditMode?i("button",{staticClass:"btn btn-success m-1",attrs:{disabled:t.isBtnDisabled},on:{click:function(e){return e.stopPropagation(),t.onSave(e)}}},[t._v(" Сохранить ")]):t._e(),t.isEditMode?i("button",{staticClass:"btn btn-warning m-1",on:{click:function(e){return e.stopPropagation(),t.onCancel(e)}}},[t._v(" Отмена ")]):t._e(),t.isEditMode?t._e():i("button",{staticClass:"btn btn-info m-1",on:{click:t.onEdit}},[t._v(" Редактировать ")])]),i("table",{staticClass:"table table-hover"},[t._m(1),i("tbody",t._l(t.settings,(function(e){return i("tr",{key:e.id,staticClass:"row"},[i("td",{staticClass:"col-4"},[t.isEditMode?i("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"setting.text"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.text},on:{input:function(i){i.target.composing||t.$set(e,"text",i.target.value)}}}):i("p",{staticClass:"text-left px-3 py-2 mb-0"},[t._v(t._s(e.text))])]),i("td",{staticClass:"col-2 text-center"},[i("input",{attrs:{type:"checkbox",disabled:!t.isEditMode},domProps:{checked:e.isPublic},on:{change:function(i){return t.changeChecked(i,e.id,"isPublic")}}})]),i("td",{staticClass:"col-2 text-center"},[i("input",{attrs:{type:"checkbox",disabled:!t.isEditMode||!e.isPublic},domProps:{checked:e.isShowInTable},on:{change:function(i){return t.changeChecked(i,e.id,"isShowInTable")}}})]),i("td",{staticClass:"col-2 text-center"},[i("input",{attrs:{type:"checkbox",disabled:!t.isEditMode||!e.isShowInTable},domProps:{checked:e.isFilterable},on:{change:function(i){return t.changeChecked(i,e.id,"isFilterable")}}})])])})),0),t._m(2)])])])},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"spinner-border"},[i("p",[t._v("Loading...")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("thead",[i("tr",{staticClass:"row"},[i("th",{staticClass:"col-4 text-center"},[t._v("Название свойства")]),i("th",{staticClass:"col-2 text-center"},[t._v("Публичное")]),i("th",{staticClass:"col-2 text-center"},[t._v("В таблице")]),i("th",{staticClass:"col-2 text-center"},[t._v("В фильтре")])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("tfoot",[i("tr",{staticClass:"row"},[i("td",{staticClass:"col"},[t._v("+")])])])}],a=(i("4de4"),i("c740"),i("caad"),i("2532"),i("2909")),c=i("465d"),o=i("d674"),r={name:"Settings",mixins:[o["a"]],data:function(){return{isLoading:!1,isEditMode:!1,settings:[],startSettings:[],changedSettingId:[]}},mounted:function(){this.getData()},computed:{isBtnDisabled:function(){return 0==this.changedSettingId.length}},methods:{getData:function(){var t=this;this.isLoading=!0,Object(c["d"])("settings").then((function(e){t.settings=Object(a["a"])(e),t.sortByIndex(t.settings),t.startSettings=JSON.parse(JSON.stringify(t.settings)),t.isLoading=!1}))},changeChecked:function(t,e,i){var n=t.target.checked,s=this.settings.findIndex((function(t){return t.id===e}));if(n)this.settings[s][i]=n;else switch(i){case"isPublic":this.settings[s].isPublic=n,this.settings[s].isShowInTable=n,this.settings[s].isFilterable=n;break;case"isShowInTable":this.settings[s].isShowInTable=n,this.settings[s].isFilterable=n;break;case"isFilterable":this.settings[s].isFilterable=n}this.getChangedSettingId(e)},getChangedSettingId:function(t){var e=this.changedSettingId.findIndex((function(e){return e===t}));e<0&&this.changedSettingId.push(t)},onEdit:function(){this.isEditMode=!0},onCancel:function(){this.settings=JSON.parse(JSON.stringify(this.startSettings)),this.isEditMode=!1},onSave:function(){var t=this;if(this.changedSettingId.length){var e=this.settings.filter((function(e){return t.changedSettingId.includes(e.id)}));Object(c["b"])("settings",e).then((function(){t.changedSettingId=[],t.isEditMode=!1}))}else this.isEditMode=!1}}},d=r,l=(i("6455"),i("2877")),u=Object(l["a"])(d,n,s,!1,null,"1d658121",null);e["default"]=u.exports},2909:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("6b75");function s(t){if(Array.isArray(t))return Object(n["a"])(t)}i("a4d3"),i("e01a"),i("d28b"),i("a630"),i("d3b7"),i("3ca3"),i("ddb0");function a(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var c=i("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(t){return s(t)||a(t)||Object(c["a"])(t)||o()}},6455:function(t,e,i){"use strict";var n=i("f8f1"),s=i.n(n);s.a},c740:function(t,e,i){"use strict";var n=i("23e7"),s=i("b727").findIndex,a=i("44d2"),c=i("ae40"),o="findIndex",r=!0,d=c(o);o in[]&&Array(1)[o]((function(){r=!1})),n({target:"Array",proto:!0,forced:r||!d},{findIndex:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),a(o)},f8f1:function(t,e,i){}}]);
//# sourceMappingURL=chunk-b0197b56.e464804a.js.map