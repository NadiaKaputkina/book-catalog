(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-22ddd7ec"],{2909:function(t,e,s){"use strict";s.d(e,"a",(function(){return c}));var o=s("6b75");function i(t){if(Array.isArray(t))return Object(o["a"])(t)}s("a4d3"),s("e01a"),s("d28b"),s("a630"),s("d3b7"),s("3ca3"),s("ddb0");function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var a=s("06c5");function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(t){return i(t)||r(t)||Object(a["a"])(t)||n()}},"99af":function(t,e,s){"use strict";var o=s("23e7"),i=s("d039"),r=s("e8b5"),a=s("861d"),n=s("7b0b"),c=s("50c4"),l=s("8418"),u=s("65f0"),d=s("1dde"),m=s("b622"),b=s("2d00"),g=m("isConcatSpreadable"),h=9007199254740991,f="Maximum allowed index exceeded",_=b>=51||!i((function(){var t=[];return t[g]=!1,t.concat()[0]!==t})),v=d("concat"),P=function(t){if(!a(t))return!1;var e=t[g];return void 0!==e?!!e:r(t)},p=!_||!v;o({target:"Array",proto:!0,forced:p},{concat:function(t){var e,s,o,i,r,a=n(this),d=u(a,0),m=0;for(e=-1,o=arguments.length;e<o;e++)if(r=-1===e?a:arguments[e],P(r)){if(i=c(r.length),m+i>h)throw TypeError(f);for(s=0;s<i;s++,m++)s in r&&l(d,m,r[s])}else{if(m>=h)throw TypeError(f);l(d,m++,r)}return d.length=m,d}})},dae9:function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t.isLoading?s("modal",[s("spinner",{attrs:{text:"загрузка"}})],1):s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-6",on:{click:t.showFullImgModal}},[s("img",{staticClass:"img-fluid",attrs:{src:t.getUrl(t.bookParams.coverImg),alt:t.getName(t.bookParams.coverImg)}}),s("div",t._l(t.bookParams.images,(function(e){return s("img",{key:t.getUrl(e),attrs:{width:"25%",src:t.getUrl(e),alt:t.getName(e)}})})),0)]),t.isShowAllImg?s("modal",[s("a",{staticClass:"carousel-control-prev",on:{click:function(e){return t.showImage(-1)}}},[s("span",{staticClass:"carousel-control-prev-icon"})]),s("div",{staticClass:"d-flex align-items-center flex-column"},[s("button",{staticClass:"btn bg-transparent border-light text-white mb-3",on:{click:t.closeModal}},[t._v(" Закрыть ")]),s("img",{staticClass:"rounded mx-auto d-block",attrs:{src:t.getUrl(t.listImages[t.currentImgIndex]),alt:t.getName(t.listImages[t.currentImgIndex])}})]),s("a",{staticClass:"carousel-control-next",on:{click:function(e){return t.showImage(1)}}},[s("span",{staticClass:"carousel-control-next-icon"})])]):t._e(),s("div",{staticClass:"col-sm-6"},[s("div",{staticClass:"text-right"},[s("font-awesome-icon",{attrs:{icon:"file-pdf",size:"2x"},on:{click:t.exportToPDF}}),t.isAdmin?s("font-awesome-icon",{attrs:{icon:"edit",size:"2x"},on:{click:t.onEdit}}):t._e()],1),s("h4",[t._v(t._s(t.bookParams.author))]),s("h2",[t._v(t._s(t.bookParams.title))]),s("table",{staticClass:"table table-bordered table-sm"},[s("tbody",[t.isPublic("weight")?s("tr",[s("td",[t._v("Вес в упаковке")]),s("td",[t._v(t._s(t.bookParams.weight))])]):t._e(),t.isPublic("size")?s("tr",[s("td",[t._v("Размер (ДхШхВ)")]),s("td",[t._v(t._s(t.bookParams.size.l)+"x"+t._s(t.bookParams.size.w)+"x"+t._s(t.bookParams.size.h)+" мм")])]):t._e(),t.isPublic("formatEdition")?s("tr",[s("td",[t._v("Формат издания")]),s("td",[t._v(t._s(t.bookParams.formatEdition))])]):t._e(),t.isPublic("ISBN")?s("tr",[s("td",[t._v("ISBN")]),s("td",[t._v(t._s(t.bookParams.ISBN))])]):t._e(),t.isPublic("vendorCode")?s("tr",[s("td",[t._v("Артикул")]),s("td",[t._v(t._s(t.bookParams.vendorCode))])]):t._e(),t.isPublic("numberOfPages")?s("tr",[s("td",[t._v("Количество страниц")]),s("td",[t._v(t._s(t.bookParams.numberOfPages))])]):t._e(),t.isPublic("coverType")?s("tr",[s("td",[t._v("Тип обложки")]),s("td",[t._v(t._s(t.bookParams.coverType))])]):t._e(),t.isPublic("paperType")?s("tr",[s("td",[t._v("Тип бумаги")]),s("td",[t._v(t._s(t.bookParams.paperType))])]):t._e(),t.isPublic("authorOnTheCover")?s("tr",[s("td",[t._v("Автор на обложке")]),s("td",[t._v(t._s(t.bookParams.authorOnTheCover))])]):t._e(),t.isPublic("publishingHouse")?s("tr",[s("td",[t._v("Издательство")]),s("td",[t._v(t._s(t.bookParams.publishingHouse))])]):t._e(),t.isPublic("yearOfIssue")?s("tr",[s("td",[t._v("Год выпуска")]),s("td",[t._v(t._s(t.bookParams.yearOfIssue))])]):t._e(),t.isPublic("language")?s("tr",[s("td",[t._v("Язык издания")]),s("td",[t._v(t._s(t.bookParams.language))])]):t._e(),t.isPublic("series")?s("tr",[s("td",[t._v("Серия")]),s("td",[t._v(t._s(t.bookParams.series))])]):t._e()])])]),t.isPublic("description")?s("div",{staticClass:"col"},[t._v(" "+t._s(t.bookParams.description)+" ")]):t._e()],1)],1)},i=[],r=(s("99af"),s("4160"),s("caad"),s("b0c0"),s("2532"),s("159b"),s("2909")),a=s("465d"),n=s("d674"),c=s("2375"),l=s("714b"),u={name:"ViewBook",mixins:[n["a"]],components:{spinner:c["a"],modal:l["a"]},data:function(){return{isLoading:!1,isShowAllImg:!1,bookParams:{},publicFields:[],listImages:[],currentImgIndex:-1}},computed:{isPublic:function(t){return function(e){return t.publicFields.includes(e)}},getUrl:function(){return function(t){return t?t.url:"@/assets/logo.png"}},getName:function(){return function(t){return t?t.name:""}}},mounted:function(){this.getBookParams(),this.getPublicFields()},methods:{getBookParams:function(){var t=this;this.isLoading=!0;var e=this.$store.state.currentBookId;e?Object(a["e"])("catalog","id","==",e).then((function(e){t.bookParams=Object.assign({},t.bookParams,e[0]),t.isLoading=!1})):this.$router.push("/list")},getPublicFields:function(){var t=this,e=this.$store.state.settings;0!==e.length&&e.forEach((function(e){if(e.isPublic)return t.publicFields.push(e.id)}))},exportToPDF:function(){},onEdit:function(){this.$router.push(this.$route.path+"/edit")},showFullImgModal:function(){this.listImages=[this.bookParams.coverImg].concat(Object(r["a"])(this.bookParams.images)),this.listImages.length>0&&(this.isShowAllImg=!0,this.currentImgIndex=0)},showImage:function(t){var e=this.listImages.length;this.currentImgIndex=t>0?this.currentImgIndex!==e-1?this.currentImgIndex+1:0:0!==this.currentImgIndex?this.currentImgIndex-1:e-1},closeModal:function(){this.isShowAllImg=!1}}},d=u,m=(s("fc77"),s("2877")),b=Object(m["a"])(d,o,i,!1,null,"0def1dce",null);e["default"]=b.exports},e290:function(t,e,s){},fc77:function(t,e,s){"use strict";var o=s("e290"),i=s.n(o);i.a}}]);
//# sourceMappingURL=chunk-22ddd7ec.91db0456.js.map